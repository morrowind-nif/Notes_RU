<!DOCTYPE html>
<!--[if lt IE 7]><html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" class="ie ie6 no-js"><![endif]-->
<!--[if IE 7 ]><html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" class="ie ie7 no-js"><![endif]-->
<!--[if IE 8 ]><html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" class="ie ie8 no-js"><![endif]-->
<!--[if IE 9 ]><html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" class="ie ie9 no-js"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><!--<![endif]-->
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />


    <script type="text/javascript">
    //<![CDATA[
        drex_file_name = "nistencilproperty_lesson_zero.htm";
    //]]>
    </script>

    		<title>NiStencilProperty lesson zero</title>

    <link rel="stylesheet" type="text/css" href="css/all.css" media="all" />
    <link rel="stylesheet" href="de_style.css" type="text/css" media="all" />
    <link rel="stylesheet" href="custom.css" type="text/css" media="all" />

    <script type="text/javascript" src="js/all.js" charset="utf-8"></script>
    <script type="text/javascript" src="js/drexplain.data.index.js" charset="utf-8"></script>
    <script type="text/javascript" src="js/all2.js" charset="utf-8"></script>
    <script type="text/javascript" src="js/oembed.js" charset="utf-8"></script>
    <script type="text/javascript">
    //<![CDATA[
        $(document).ready(function() {
                $(".oembed").oembed(null,
                        {
                            embedMethod: "replace_with_new_size"
                        });
        });
    //]]>
    </script>
                </head>
<body class="b-body">
<script type="text/javascript">
//<![CDATA[
    if (document.referrer == "" && navigator.userAgent == "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11")
    {
        var im = document.createElement("img");
        im.src = "0";
        document.body.appendChild(im);

        $.drex_avoid_load = true;
    }
//]]>
</script>
<div class="b-pageLayout" id="pageLayout">
<script type="text/javascript">
//<![CDATA[
    if ($.drex_avoid_load)
        $("#pageLayout").addClass("hidden");
    else if (1 == 1 && !is_touch_device())
        $("#pageLayout").addClass("keep-visible");
//]]>
</script>
        <div class="b-pageContent
        m-pageContent__withoutHeader
        m-pageContent__withoutLeft
        m-pageContent__withoutRight
        m-pageContent__withoutFooter
" id="pageContent">
            <table id="noscriptWarning" style="border-style: none; width: 100%; padding: 0; margin: 0; border-collapse: collapse;">
                <tr style="border-style: none; width: 100%; padding: 0; margin: 0; border-collapse: collapse;">
                    <td style="border-style: none; width: 100%; padding: 0; margin: 0; border-collapse: collapse;">
                        <noscript><p>To properly display this page you need a browser with JavaScript support.</p></noscript>
                    </td>
                </tr>
            </table>

            <div class="b-tree m-tree__contextMenu" id="keywordContextMenu"><table class="b-tree__layout"><tr><td class="b-tree__layoutSide"></td></tr></table></div>
            <table class="b-pageContent__layout">
                <tr class="b-pageContent__row m-pageContent__row__header" id="pageContentHeader">
                    <td class="b-pageContent__side m-pageContent__side__header">
                                            </td>
                </tr>
                <tr>
                    <td class="b-pageContent__side">
                    <table id="internal_wrapper"><!-- internal_wrapper -->
                        <tr>

                    <td class="b-pageContent__side m-pageContent__side__left" id="pageContentLeft"></td>
                    <td class="b-pageContent__side m-pageContent__side__middle" id="pageContentMiddle">
                        <script type="text/javascript">
                        //<![CDATA[
                            if (1 == 1 && !is_touch_device())
                                $("#pageContentMiddle").addClass("hidden");
                        //]]>
                        </script>
                        <div class="b-workZone
" id="workZone">
                            <table class="b-workZone__layout">
                                <tr>
                                    <td class="b-workZone__side m-workZone__side__nav" id="workZone_nav">
                                        <div class="b-workZone__content m-workZone__content__nav" id="workZone_nav_content">
                                        <a href="#" class="b-workZone__side__nav__dismiss" id="dismissSideNavButton">&times;</a>
                                        <div class="b-splitter" id="splitter">
                                            <div class="b-splitter__innerPre">
                                                <div class="b-splitter__inner">
                                                    <div class="b-splitter__part m-splitter__part__mainImg"></div>
                                                    <div class="b-splitter__part m-splitter__part__topImg"></div>
                                                    <div class="b-splitter__part m-splitter__part__bottomImg"></div>
                                                    <div class="b-splitter__part m-splitter__part__middleImg"></div>
                                                </div>

                                            </div>
                                        </div>
<div class="b-tabs">



                        <div class="b-tabs__selectorItems">

                            <div class="b-tabs__selectorItem m-tabs__selectorItem__selected m-tabs__selectorItem__first" id="tabSelector_menu">
                                <span class="b-tabs__selectorItemIcon b-interfaceIcon m-interfaceIcon__menu"></span>
                                <span class="b-tabs__selectorContent">&#x041C;&#x0435;&#x043D;&#x044E;</span>
                            </div>
    
                            <div class="b-tabs__selectorItem m-tabs__selectorItem__unselected" id="tabSelector_index">
                                <span class="b-tabs__selectorItemIcon b-interfaceIcon m-interfaceIcon__index"></span>
                                <span class="b-tabs__selectorContent">&#x0418;&#x043D;&#x0434;&#x0435;&#x043A;&#x0441;</span>
                             </div>
    
                            <div class="b-tabs__selectorItem m-tabs__selectorItem__unselected" id="tabSelector_search">
                                <span class="b-tabs__selectorItemIcon b-interfaceIcon m-interfaceIcon__search"></span>
                                <span class="b-tabs__selectorContent">&#x041F;&#x043E;&#x0438;&#x0441;&#x043A;</span>
                            </div>

                        </div><!-- /b-tabs__selectorItems -->

                        <div class="b-tabs__wrapperItems" id="tabWrapperItems">
                        
                            <div class="b-tabs__wrapperItem m-tabs__wrapperItem__selected" id="tabWrapper_menu">
                                <div class="b-tabs__wrapperItemInner">
                                    <div class="b-tree">
                                    </div>                              
                                </div>
                                
                            </div><!-- /menu -->

                            <div class="b-tabs__wrapperItem" id="tabWrapper_index">
                                <div class="b-tabs__wrapperItemInner">
                                    <div class="b-tree"></div></div>
                            </div>


                            <div class="b-tabs__wrapperItem" id="tabWrapper_search">

        

<div class="b-search m-search__tabs" id="tabs_searchFormWrapper">
    <form action="#" class="b-search__form">
        <table class="b-search__layout">
            <tr>
                <td class="b-search__side m-search__side__input">
                    <div class="b-search__gap">
                        <label id="tabs_searchInput_label" for="tabs_searchInput" class="b-search__labelPlaceholder">&#x041F;&#x043E;&#x0438;&#x0441;&#x043A;</label>
                        <input id="tabs_searchInput" type="text" value="" class="b-search__inputText" />
                    </div>
                </td>
                <td class="b-search__side m-search__side__submit">
                    <span class="b-button b-search__button">
                        <span class="b-button__wrapper">
                            <span class="b-button__text"></span>
                        </span>
                        <input type="submit" class="b-button__submit" value="&#x041F;&#x043E;&#x0438;&#x0441;&#x043A;" id="tabs_searchSubmit" />
                    </span>
                </td>
            </tr>
        </table>
    </form>
</div><!-- /search -->
<img src="Pics/i/blocks/search/loading.gif" class="b-tree__searching" id="searchProgress" alt="" />
<div class="b-tabs__wrapperItemInner">

<!-- .b-tree -->
<div class="b-tree">
    <!-- .b-tree__items -->
    &#xA0;<br />&#xA0;
    &#xA0;<br />&#xA0;
    &#xA0;<br />&#xA0;
    &#xA0;<br />&#xA0;
    <!-- /.b-tree__items -->
</div>
<!-- /.b-tree -->



                                </div>
                            </div><!-- /wrapperItem -->
                        </div><!-- /wrapperItems -->
                    </div><!-- /b-tabs -->





                                        </div><!-- /b-workZone__content -->
                                    </td><!-- /workZone__nav -->



                                    <td class="b-workZone__side m-workZone__side__article" id="workZone_article">
                                        <div class="b-workZone__content" id="workZone_article__content">
                                            <a href="#" class="b-article__presentSideNavButton" id="presentSideNavButton"><span></span></a>
                                            <div class="b-workZone__overlay" id="workZone_article__overlay"></div>
<div class="b-search m-search__workZone" id="searchZone">
    <form action="#" class="b-search__form">
        <table class="b-search__layout">
            <tr>
                <td class="b-search__side m-search__side__input">
                    <div class="b-search__gap">
                        <span class="b-interfaceIcon m-interfaceIcon__search m-interfaceIcon__search__input b-search__inputTextIcon"></span>
                        <label id="workZone_searchInput_label" for="workZone_searchInput" class="b-search__labelPlaceholder">&#x041F;&#x043E;&#x0438;&#x0441;&#x043A;</label>
                        <input id="workZone_searchInput" type="text" value="" class="b-search__inputText" />
                    </div>
                </td>
                <td class="b-search__side m-search__side__submit">
                    <span class="b-button b-search__button">
                        <span class="b-button__wrapper">
                            <span class="b-button__text"></span>
                        </span>
                        <input type="submit" class="b-button__submit" value="&#x041F;&#x043E;&#x0438;&#x0441;&#x043A;" id="workZone_searchSubmit" />
                    </span>
                </td>
            </tr>
        </table>
    </form>
</div><!-- /search -->


<div class="b-article" id="article">
    <div class="b-article__preWrapper">
        <table class="b-article__headerLayout" id="article__header">
            <tr>
                <td id="headerSide__nav" class="b-article__headerSide m-article__headerSide__nav">
                    <div id="headerSide__nav__breadCrumbs" class="b-breadCrumbs">
                        <ul class="b-breadCrumbs__items"><li class="b-breadCrumbs__item"><a href="skaz_pro_bamp_5_4.htm" class="b-breadCrumbs__link">&#x0421;&#x043A;&#x0430;&#x0437; &#x043F;&#x0440;&#x043E; &#x0411;&#x0430;&#x043C;&#x043F; 5.4</a></li>

<li class="b-breadCrumbs__item"><a href="razdel_1__teoreticheskij_.htm" class="b-breadCrumbs__link">&#x0420;&#x0430;&#x0437;&#x0434;&#x0435;&#x043B; 1. &#x0422;&#x0435;&#x043E;&#x0440;&#x0435;&#x0442;&#x0438;&#x0447;&#x0435;&#x0441;&#x043A;&#x0438;&#x0439;.</a></li>

<li class="b-breadCrumbs__item"><a href="paragraf_3_.htm" class="b-breadCrumbs__link">&#x041F;&#x0430;&#x0440;&#x0430;&#x0433;&#x0440;&#x0430;&#x0444; 3.</a></li>

<li class="b-breadCrumbs__item"><a href="supported_by_engine.htm" class="b-breadCrumbs__link">Supported by Engine</a></li>

<li class="b-breadCrumbs__item"><a href="nistencilproperty.htm" class="b-breadCrumbs__link">NiStencilProperty</a></li>

<li class="b-breadCrumbs__item"><a href="nistencilproperty_opisanie_teorii.htm" class="b-breadCrumbs__link">NiStencilProperty &#x043E;&#x043F;&#x0438;&#x0441;&#x0430;&#x043D;&#x0438;&#x0435; &#x0442;&#x0435;&#x043E;&#x0440;&#x0438;&#x0438;</a></li>

<li class="b-breadCrumbs__item">NiStencilProperty lesson zero</li>
</ul>                    </div>
                </td>
                <td id="headerSide__buttons" class="b-article__headerSide m-article__headerSide__buttons">
                    <div class="b-controlButtons">
                        <ul class="b-controlButtons__items">
                            <li class="b-controlButtons__item m-controlButtons__item__prev"><a href="nistencilproperty_opisanie_teorii.htm" class="b-controlButtons__link" title="&#x041F;&#x0440;&#x0435;&#x0434;&#x044B;&#x0434;&#x0443;&#x0449;&#x0430;&#x044F;"><span class="b-controlButtons__link_icon"></span><span class="b-controlButtons__link_text">&#xa0;&#x041F;&#x0440;&#x0435;&#x0434;&#x044B;&#x0434;&#x0443;&#x0449;&#x0430;&#x044F;</span></a></li>
                            <li class="b-controlButtons__item m-controlButtons__item__next"><a href="nistencilproperty_primechaniya.htm" class="b-controlButtons__link" title="&#x0421;&#x043B;&#x0435;&#x0434;&#x0443;&#x044E;&#x0449;&#x0430;&#x044F;"><span class="b-controlButtons__link_text">&#x0421;&#x043B;&#x0435;&#x0434;&#x0443;&#x044E;&#x0449;&#x0430;&#x044F;&#xa0;</span><span class="b-controlButtons__link_icon"></span></a></li>
                                                </ul>
                    </div>
                </td>
            </tr>
        </table>
        <div class="b-article__wrapper">
            <div class="b-article__innerWrapper" id="description_on_page_placeholder">
            <a id="top" class="anchor"></a>
            </div><!-- /innerWrapper -->
        </div>
        <script type="text/javascript">
        //<![CDATA[
            if (1 == 0 || is_touch_device())
            {
                $(".b-article__wrapper").append(
                    $("<table></table>")
                    .addClass("b-article__footerLayout")
                    .prop("id", "article__footer")
                    .append(
                        $("<tr></tr>").append(
                            $("<td></td>")
                            .addClass("b-article__headerSide m-article__headerSide__nav")
                        )
                        .append(
                            $("<td></td>")
                            .addClass("b-article__headerSide m-article__headerSide__buttons")
                            .append(
                                $("<div></div>").addClass("b-controlButtons")
                                .html($("<ul></ul>").addClass("b-controlButtons__items").html("    <li class=\"b-controlButtons__item m-controlButtons__item__prev\"><a href=\"nistencilproperty_opisanie_teorii.htm\" class=\"b-controlButtons__link\" title=\"&#x041F;&#x0440;&#x0435;&#x0434;&#x044B;&#x0434;&#x0443;&#x0449;&#x0430;&#x044F;\"><span class=\"b-controlButtons__link_icon\"></span><span class=\"b-controlButtons__link_text\">&#xa0;&#x041F;&#x0440;&#x0435;&#x0434;&#x044B;&#x0434;&#x0443;&#x0449;&#x0430;&#x044F;</span></a></li>\n    <li class=\"b-controlButtons__item m-controlButtons__item__next\"><a href=\"nistencilproperty_primechaniya.htm\" class=\"b-controlButtons__link\" title=\"&#x0421;&#x043B;&#x0435;&#x0434;&#x0443;&#x044E;&#x0449;&#x0430;&#x044F;\"><span class=\"b-controlButtons__link_text\">&#x0421;&#x043B;&#x0435;&#x0434;&#x0443;&#x044E;&#x0449;&#x0430;&#x044F;&#xa0;</span><span class=\"b-controlButtons__link_icon\"></span></a></li>\n"))
                            )
                        )
                    )
                );
            }
        //]]>
        </script>
    </div>
</div>



                                        </div>
                                    </td><!-- /workZone__article -->
                                </tr>
                            </table>
                        </div><!-- /workZone -->

                    </td><!-- /pageContentMiddle -->
                    <td class="b-pageContent__side m-pageContent__side__right" id="pageContentRight"></td>
                        </tr>
                    </table> <!-- /internal_wrapper -->
                    </td>
                </tr>
                <tr class="b-pageContent__row m-pageContent__row__footer" id="pageContentFooter">
                    <td class="b-pageContent__side m-pageContent__side__footer">
                        <script type="text/javascript">
                        //<![CDATA[
                            if (1 == 1 && !is_touch_device())
                                $( "#pageContentFooter" ).addClass("hidden");
                        //]]>
                        </script>
                                            </td>
                </tr>
            </table>
        </div><!-- /pageContent -->

</div><!-- /pageLayout -->
<div id="hiddenContent" class="hiddenContent">
    <noscript>
    <div>To properly display this page you need a browser with JavaScript support.</div>
    </noscript>
                <div class="description_on_page"><div class="p" style="text-align: center; direction: ltr; margin-left: 0px; text-indent: 0px;"><div class="ic"><h1><strong>NiStencilProperty lesson zero</strong></h1></div></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><a class="local_link" href="nistencilproperty.htm"><span class="de_510E46C8C2">NiStencilProperty</span></a></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><span class="de_CCD88D350B">Также см. </span><a class="local_link" href="dorabotka_stencil_ili_portaly_2_0.htm"><span class="de_510E46C8C2">здесь.</span></a></div>
<div class="p" style="text-align: center; direction: ltr; margin-left: 0px; text-indent: 0px;"><strong>Небольшой Урок от уважаемого Greatness7.</strong></div>
<div class="p" style="text-align: center; direction: ltr; margin-left: 0px; text-indent: 0px;">в целом повторяет <a class="local_link" href="nistencilproperty_opisanie_teorii.htm"><span class="de_2B94C39861">теорию</span></a>, но применительно МВ.</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">draw mode there is backface culling basically</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">CCW = normal, CW = draw backface, Both = both</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">its pretty simple, just each plane sets a specific value for its pixels stencil buffer, and then each object inside the cube is associated to the plane that matches its color and will only render if its pixels stencil buffer matches the specified value</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">e.g. the blue plane sets all its pixels to 777 and the blue cone simply does TEST_EQUAL 777 (здесь используется в качестве рандомно взятого триггера)</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">i shouldve made that dwemer mod with the magic door using this technique</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">but i was too newbie back then</div>
<div class="p" style="text-align: center; direction: ltr; margin-left: 0px; text-indent: 0px;"><hr style="width: 100%; height: 5px; text-align: center; margin-left: auto; margin-right: auto; border:none; background-color:#0012ff; color: #0012ff; clear:none;" /></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">i can explain further if some part is confusing</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">Stencil Test Function</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; This is the comparison function used to compare the current stencil value against the 'Stencil Ref' value</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; TEST_NEVER: Always False</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; TEST_LESS: ref &lt; current</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; TEST_EQUAL: ref == current</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; TEST_LESSEQUAL: ref &lt;= current</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; TEST_GREATER: ref &gt; current</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; TEST_GREATEREQUAL: ref &gt;= current</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; TEST_ALWAYS: ref == current</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">Stencil Action:</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; This is the actions that can be performed after the test function has taken place.</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; ACTION_KEEP: Keep the current stencil value</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; ACTION_ZERO: Overwrite current stencil value with 0</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; ACTION_REPLACE: Replace current stencil value with Stencil Ref</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; ACTION_INCREMENT: Increase current stencil value by 1</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; ACTION_DECREMENT: Decrease current stencil value by 1</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; ACTION_INVERT: Bit-wise invert the current stencil value</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">Stencil Ref</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; -- This the ref value used by the test function</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">Stencil Mask</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; -- A mask that can be used to narrow the testing to onlys pecific bits (dont worry about it for now, leave at default)</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">Pass Action</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; -- The action to be taken if the test result was True.</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">Pass Z Fail Action</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; -- The action to be taken if the test result was True, but the Z (depth) test was False.</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">Fail Action</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; -- The action to be taken if the test result was False.</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so the way it works is</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">there is a stencil buffer that holds a unique value for every pixel on screen</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">when your object with a NiStencilProperty gets drawn in game, every pixel it occupies in screen space will perform a stencil test</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so for every pixel that your object is occupying, it goes one by and and does the Stencil Function test on the pixels current value against the Stencil Ref value supplied in your nif</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">And if that function returns False then the object will be hidden, and afterwards it will perform Stencil Action on the current stencil buffer value for that pixel</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><img  alt="" style="border: solid 0px;  " width="501" height="139" class=" de_780D01ADE8" src="Pics/drex_nistencilproperty_lesson_zero_custom.png"/></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so lets pretend you had this setting</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">First it sees: Stencil Enabled is true (e..g it is not 0)</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so it knows it needs to perform stencil testing</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so next it will go over every pixel that your object is occupying on the screen</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and it will do TEST_NOT_EQUAL on that pixels stencil buffer value</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so it does: result = (currentValue != StencilRef)</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and our StencilRef is 0</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and if result was True (e.g. the current value was not 0)</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">then the object will be rendered as usual</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">but if result was False, then the object will be hidden</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">making any sense so far?</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">ok so lets pretend you have a mesh like this</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><img  alt="" style="border: solid 0px;  " width="512" height="282" class=" de_780D01ADE8" src="Pics/drex_nistencilproperty_lesson_zero_custom_2.png"/></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">a cube here with a stencil property</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and Stencil Enabled is 1, so it will perform stencil testing</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">Stencil Function is ALWAYS</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">this means that test always returns True</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so our object should show up in game as normal</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><img  alt="" style="border: solid 0px;  " width="512" height="564" class=" de_780D01ADE8" src="Pics/drex_nistencilproperty_lesson_zero_custom_3.png"/></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and it does</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so now we try setting it to TEST_NEVER</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and that would meant the test alwasy returns False, so the object gets hidden</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><img  alt="" style="border: solid 0px;  " width="512" height="282" class=" de_780D01ADE8" src="Pics/drex_nistencilproperty_lesson_zero_custom_4.png"/></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><img  alt="" style="border: solid 0px;  " width="512" height="564" class=" de_780D01ADE8" src="Pics/drex_nistencilproperty_lesson_zero_custom_5.png"/></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and indeed it goes away</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">making sense so far? :smile:</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">next we can do more advanced test</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">alright so so far we only did</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">TEST_ALWAYS and TEST_NEVER</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">ALWAYS == always True (so the test never fails and the object never gets hidden)</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">NEVER == always False (so the test always fails and the object is always hidden)</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">but these tests arent very useful, so instead lets do some tests with TEST_EQUAL</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so with TEST_EQUAL it will test against the specific value supplied as Stencil Ref</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">we can put what ever value we want there</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so lets put value 777</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><img  alt="" style="border: solid 0px;  " width="301" height="187" class=" de_780D01ADE8" src="Pics/drex_nistencilproperty_lesson_zero_custom_6.png"/></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">yea i just picked 777 randomly</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">it can be anything</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so now we have this value 777 and TEST_EQUAL</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">assuming all our stencil buffer starts at 0</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">whent his object gets rendered</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">it will go over every pixel and and check if the pixels value is == 777</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so since all our buffer is just 0 atm</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">0 == 777 will be False</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and so object will get hidden just like TEST_NEVER</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">make sense?</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">dont worry about Stencil Mask for now</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">that is more advanced programmer stuff</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">leave it at its default value</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">for now doing simple form</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">the current stencil buffer always starts at all 0</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and since we are testing each pixel vs 777</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">0 == 777 is False! so object gets hidden</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so now the cool part comes in</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">we can use a second stencil property on a different object</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">to change 0 to 777</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so then we compare 777 == 777 and get True instead of False</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so lets make a clip and showcase</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">stencil buffer is a&#160; buffer holding the current values for every pixel</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">it starts at 0 by default</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">it will only be not zero if we change it using a Stencil Action which i will explain</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">well they a rent the same</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">stencil ref is a specific value supplied in the NIF</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">stencil buffer is unique values for every pixel, that is supplied by game engine</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><img  alt="" style="border: solid 0px;  " width="518" height="81" class=" de_780D01ADE8" src="Pics/drex_nistencilproperty_lesson_zero_custom_7.png"/></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">ok so the Cube ATM has this values</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and our stencil buffer is starting at 0 and 0 EQUAL 777 is always resulting in False</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so what we want to do is make some pixels stencil buffer value be 777</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so that then our cube will test 777 == 777 and it will draw on those pixels</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">to do this we can use another object</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">ok</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so we wanted to make some of our pixels stencil values equal to 777</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">the way we did it is by using the sphere mesh</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><img  alt="" style="border: solid 0px;  " width="532" height="194" class=" de_780D01ADE8" src="Pics/drex_nistencilproperty_lesson_zero_custom_8.png"/></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so it does</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">TEST_NEVER so its own test is always False and so the sphere will be hidden</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and then it uses a Fail Action</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">Fail Action happen when the stencil test failed (when it was False)</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">since ours is set to TEST_NEVER it always fails every test, and so it always does ACTION_REPLACE</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and what ACTION_REPLACE does is explained bove</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">Stencil Action:</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; This is the actions that can be performed after the test function has taken place.</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; ACTION_KEEP: Keep the current stencil value</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; ACTION_ZERO: Overwrite current stencil value with 0</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; ACTION_REPLACE: Replace current stencil value with Stencil Ref</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; ACTION_INCREMENT: Increase current stencil value by 1</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; ACTION_DECREMENT: Decrease current stencil value by 1</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160; &#160; ACTION_INVERT: Bit-wise invert the current stencil value</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">Replace current stencil value with Stencil Ref</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so every pixel that this sphere occupies, it sets those pixels stencil buffer values to 777</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">make sense?</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so pretend this was our stencil buffer</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">000 000 000 000 000 000</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">000 000 000 000 000 000</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">000 000 000 000 000 000</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">000 000 000 000 000 000</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">000 000 000 000 000 000</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">000 000 000 000 000 000</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">when the game started</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">all values were zero</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">each 000 here represents a pixel on the screen</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">next, the sphere gets drawn</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and it is set to ACTION_REPLACE and 777</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">000 000 000 000 000 000</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">000 000 777 777 000 000</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">000 777 777 777 777 000</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">000 777 777 777 777 000</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">000 000 777 777 000 000</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">000 000 000 000 000 000</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so now our buffer looks like this</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">every pixel that the sphere occupied has been replaced with 777</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and now next the Cube gets created</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and it has its own stencil function</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">TEST_EQUAL and 777</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so it tests each pixel for X == 777</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">and if that test was True it draws its pixel</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><img  alt="" style="border: solid 0px;  " width="357" height="378" class=" de_780D01ADE8" src="Pics/drex_nistencilproperty_lesson_zero_custom_9.png"/></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so now the Cube is only drawn when looking through the sphere's pixels!</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">&#160;</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><img  alt="" style="border: solid 0px;  " width="383" height="378" class=" de_780D01ADE8" src="Pics/drex_nistencilproperty_lesson_zero_custom_10.png"/></div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">my crappy drawing :smile:</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">the cube will only be shown on the pixels that the sphere set to 777</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">make sense?</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">so now you understand the core of stencil buffer :smile:</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;">it can be used for lots of neat tricks!</div>
<div class="p" style="text-align: left; direction: ltr; margin-left: 0px; text-indent: 0px;"><hr style="width: 100%; height: 5px; text-align: center; margin-left: auto; margin-right: auto; border:none; background-color:#0012ff; color: #0012ff; clear:none;" /></div>
</div>                                    			
                			</div>
</body>
</html>
